2-3 論理演算子
============

## 学習のポイント

* `論理演算子`を使うと、複数の検索結果を組み合わせることができる

* `NOT演算子`は、「〜でない」という検索条件を作る

* `AND演算子`を使った検索条件は、両辺が共に成り立つときに成り立つ

* `OR演算子`を使った検索条件は、両辺のどちらか一方、あるいは両辺の検索条件が成り立てば成り立つ

* `真(TRUE)`と`疑(FALSE)`のいずれかになる値のことを、`真理値`と呼ぶ

* `比較演算子`は比較が成り立つと`真`を、成り立たないと`偽`を返す

  -> ただし、SQLに特有の表現の不明(`UNKNOWN`)という`真理値`も存在する

* `論理演算子`による`真理値`の操作とその結果をまとめた表を`真理表`と呼ぶ

* SQLの論理演算は、`真`、`偽`、`不明`を演算に含む3値論理



## NOT演算子

* 「〜ではない」という否定の条件を指定する場合に、`<>`演算子を使っていた

* `NOT`：他の検索条件と組み合わせて使う。`<>`演算子よりも広く使うことができる

* 例)販売単価が1000円以上の行を選択

```sql
SELECT shohin_mei, shohin_bunri, hanbai_tanka
FROM Shohin
WHERE hanbai_tanka >= 1000;
```

```sql
shohin_mei   | shohin_bunri | hanbai_tanka
----------------+--------------+--------------
Tシャツ        | 衣服         |         1000
カッターシャツ | 衣服         |         4000
包丁           | キッチン用品 |         3000
圧力鍋         | キッチン用品 |         6800
```

* 例)販売単価が1000円以上ではない行を選択

  -> 販売単価が1000円未満の商品を選択する

```sql
SELECT shohin_mei, shohin_bunri, hanbai_tanka
FROM Shohin
WHERE NOT hanbai_tanka >= 1000;
```

```sql
shohin_mei  | shohin_bunri | hanbai_tanka
--------------+--------------+--------------
穴あけパンチ | 事務用品     |          500
フォーク     | キッチン用品 |          500
おろしがね   | キッチン用品 |          880
ボールペン   | 事務用品     |          100
```



## AND演算子とOR演算子

* `AND`演算子：両辺の検索条件が両方とも成り立つ時に、全体の検索条件として成り立つ

* `OR`演算子：両辺の検索条件のうち、どちらか一方あるいは両方が成り立つ時に全体の検索条件として成り立つ

* 例)Shohinテーブルから、商品分類がキッチン用品で、かつ販売単価が3000円以上の商品

```sql
SELECT shohin_mei, shiire_tanka
  FROM Shohin
 WHERE shohin_bunri = 'キッチン用品'
   AND hanbai_tanka >= 3000;
```

```sql
shohin_mei | shiire_tanka
------------+--------------
包丁       |         2800
圧力鍋     |         5000
```

* 例)商品分類がキッチン用品か、または販売単価が3000円以上の商品

```sql
SELECT shohin_mei, shiire_tanka
  FROM Shohin
 WHERE shohin_bunri = 'キッチン用品'
    OR hanbai_tanka >= 3000;
```

```sql
shohin_mei   | shiire_tanka
----------------+--------------
カッターシャツ |         2800
包丁           |         2800
圧力鍋         |         5000
フォーク       |             
おろしがね     |          790
```



## カッコ()をつけると強くなる

* 「商品分類が事務用品」かつ「登録日が2009年9月11日または2009年9月20日」

  -> 穴あけパンチのみが検索条件に合う商品

```sql
SELECT shohin_mei, shohin_bunri, torokubi
  FROM Shohin
 WHERE shohin_bunri = '事務用品'
   AND torokubi = '2009-09-11'
    OR torokubi = '2009-09-20';
```

```sql
shohin_mei  | shohin_bunri |  torokubi  
--------------+--------------+------------
Tシャツ      | 衣服         | 2009-09-20
穴あけパンチ | 事務用品     | 2009-09-11
包丁         | キッチン用品 | 2009-09-20
フォーク     | キッチン用品 | 2009-09-20
```

* `OR`演算子よりも、`AND`演算子の方が優先される

  -> 「商品分類が事務用品である、かつ、登録日が2009年9月11日である」または「登録日が2009年9月20日である」

* `AND`演算子よりも`OR`演算子を優先したい時には、`OR`演算子とその両辺を半角文字のカッコ`()`で囲む

```sql
SELECT shohin_mei, shohin_bunri, torokubi
  FROM Shohin
 WHERE shohin_bunri = '事務用品'
   AND (torokubi = '2009-09-11'
    OR torokubi = '2009-09-20');
```

```sql
shohin_mei  | shohin_bunri |  torokubi  
--------------+--------------+------------
穴あけパンチ | 事務用品     | 2009-09-11
```

* `NULL`：真でも偽でもない値、「不明」

  -> `NULL`が含まれている条件では、`AND`も`OR`も「不明」という論理値になる



| 版 |   年月日  |
|----|----------|
|初版|2018/12/07|
