01 Pythonでクラスを使う
=====================

* `オブジェクト`：`データ`と`命令(メソッド)`が一緒になっているもの

  * いわばプログラムで使う部品のようなもの

  * 出来合いの部品を組み合わせてプログラムを作っていくのが、オブジェクト指向の特徴



## オブジェクトとクラス

* `オブジェクト`には、数値や文字列、リストの要素のようにデータが収められている

  * また、データに対して色々な処理を実行できるメソッドも持っている

  * オブジェクトは単なるデータではなく、どのような振る舞いをすれば良いのかを知っている

* `オブジェクト`は、データの性質によって分類されている

  => 似た性質を持ったオブジェクトに対しては、同じメソッドが使えるようになっている

* `クラス`：オブジェクトの設計図

  * オブジェクトがどのような性質を持っていて、どのような振る舞いをするのか、ということをコードに書いている

  * これらを`クラス`にまとめることによって、より便利なオブジェクトをプログラムで利用できるようになる

* Pythonの標準ライブラリには、プログラムで利用できる便利なクラスがたくさん付属している



## クラスからオブジェクト(インスタンス)を作る

* `Decimal`：Pythonに内蔵されているクラス

  * 10進数浮動小数点数を扱う

  * Pythonの数値演算で生じる誤差を回避する

  * 標準ライブラリに入っている

* Decimalクラスを使う準備

  => あらかじめ以下のような命令を入力する

```python
>>> from decimal import Decimal
```

* クラスからオブジェクトを作るには、クラスを関数のように呼び出す

  => クラスによっては、クラスを呼び出す時に引数を与える必要がある

```python
>>> d = Decimal(10)
>>> print(d)
10
```

* `インスタンス`：クラスから作ったオブジェクトのこと

  * インスタンスは、`データ`も`メソッド`も持っている

    => オブジェクトの一種



## インスタンスを利用する

* Decimalクラスのインスタンスは、プログラムの中で組み込み型の数値型と同じように利用できる

  => 例)インスタンスを使った演算

```python
>>> print(d + 10)
20
```

* 注意)精度を保つために、Decimalクラスのインスタンス同士を演算に使う必要がある

```python
# Float型同士の比較では、2進数による誤差が生じてしまう
>>> 0.1 * 3 == 0.3
False

# Decimal型同士の比較では、誤差を起こさず正しい比較ができる
>>> Decimal('0.1') * 3 == Decimal('0.3')
True
```

* Decimalクラスのインスタンスは、メソッドを持っている

  * `sqrt()`：平方根を計算する

  ```python
  >>> print(d.sqrt())
  3.162277660168379331998893544
  ```



## オブジェクトとインスタンス

* クラスのインスタンスと、組み込み型のオブジェクトはとても似た作りになっている

  => オブジェクトもインスタンスも両方ともデータを持っていて、データに対する操作を行うために、メソッドを持っている

  * 組み込み型：データの性質によって、数値型や文字列型などの「型」がある

    => どのような型であるかどうかで、オブジェクトに対して実行できる操作やメソッドの種類が異なる

  * クラス：クラスの名前(クラス名)がこの型に相当する

    => クラス名によって、インスタンスの性質を決める

  * インスタンス：どのクラスによってメソッドや処理の種類が異なる

![オブジェクトとインスタンス](.images/オブジェクトとインスタンス.png)

* 組み込み型の`型`や`クラス`は、プログラムで使う部品の「設計図」のようなもの

  => 「設計図」を基に、プログラムを組み立てるために作る「部品」が、`オブジェクト`や`インスタンス`

* プログラムで利用する部品の設計図をあらかじめ作っておき、必要に応じて部品を作って利用する、というのがオブジェクト指向を使った開発の基本

  * 設計図：`型`

   * 設計図から作った部品：`オブジェクト`



| 版 |  年月日   |
|---|----------|
|初版|2019/01/30|
