05 ループの応用
=============

## while文でループを作る

* `while`文：ループを作ることができる

* for文と違うところは、ループにシーケンスを添えないこと

* while文には繰り返し変数もなく、シンプルなループを作ることができる

* シーケンスや繰り返し変数がない代わりに、while文は条件式を添える

  => この条件式がTrue(真)である間、ループを繰り返す

* while文の記法

```python
while 条件式:
  ループ内で実行するブロック
```

* for文で作るループは、シーケンスの要素数だけ繰り返す

* 一方、while文で作るループは、条件式を添えて、ループが終わる条件を指定するようになっている

* 例)Fizz Buzz問題

  * while文にはシーケンスが添えられないので、`ループカウンタ`と呼ばれる変数を使って対処する

    => `1`に初期化した変数を定義して、ループのブロックの中で1ずつ足していく

```python
>>> cnt = 1
>>> while cnt <= 100:
...   if cnt%3 == 0 and cnt%5 == 0:
...     print("FizzBuzz")
...   elif cnt%3 == 0:
...     print("Fizz")
...   elif cnt%5 == 0:
...     print("Buzz")
...   else:
...     print(cnt)
...   cnt = cnt + 1
...
1
2
Fizz
# 省略
98
Fizz
Buzz
```



## break文とcontinue文を使ったループの制御

* ループブロック内で使える機能として、`break`文と`continue`文がある

* `break`文：ループに限らずブロックから抜け出すために使う

  => 特別な条件でループを終えたい時などに使うと便利

* `continue`文：それ以降のループブロックを実行せず、ブロックの最初まで戻ることができる

  => 特定の条件にある時、ブロックの一部を実行せず、ループを続けたい時に使うと便利

* 例)じゃんけんゲーム

```python
>>> from random import randint
>>> hands = {0:"グー", 1:"チョキ", 2:"パー"}
>>> rules = {(0, 0):"あいこ", (0, 1):"勝ち",   (0, 2):"負け",
...          (1, 0):"負け",   (1, 1):"あいこ", (1, 2):"勝ち",
...          (2, 0):"勝ち",   (2, 1):"負け",   (2, 2):"あいこ"}
>>> while True:
...   pc_hand = randint(0, 2)
...   user_hand_str = input("0:グー 1:チョキ 2:パー 3:やめる")
...   if user_hand_str == "3":
...     break
...   if user_hand_str not in ("0", "1", "2"):
...     continue
...   user_hand = int(user_hand_str)
...   print("あなた"+hands[user_hand]+"、コンピュータ："+hands[pc_hand])
...   print(rules[(user_hand, pc_hand)])
...
0:グー 1:チョキ 2:パー 3:やめる0
あなたグー、コンピュータ：グー
あいこ
0:グー 1:チョキ 2:パー 3:やめる2
あなたパー、コンピュータ：パー
あいこ
0:グー 1:チョキ 2:パー 3:やめる3
>>>
```



## ループのelse

* Pythonでは、for文やwhile文でも`else`文を使うことができる

* for文にelseを添えると、ループの実行が終わった後に実行されるブロックを定義できる

* ただし、for文のブロックでbreak文が実行された時はelse以降のブロックは実行されない

* 例)素数の判定プログラムを、`else`文を使ってスッキリさせる

```python
>>> a_num = 59
>>> for num in range(2, a_num):
...   if a_num % num == 0:
...     print(a_num, "は素数ではありません")
...     break
...   else:
...     print(a_num, "は素数です")
...
59 は素数です
# 59番目
>>>
```



| 版 |  年月日   |
|---|----------|
|初版|2019/01/13|
