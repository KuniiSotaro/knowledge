04 リスト型、タプル型を使いこなす
============================

## リストをソートする

* Pythonのリスト型では、要素の並び順を入れ替えるソートを簡単に行える

* `sort()`：数値を要素として持つリストに対して、要素を昇順(小さい順)に並べ替えることができる

* リスト型は変更可能なデータ型なので、`sort()`メソッドを呼び出した結果、リストオブジェクト自体が書き換わる

```python
>>> monk_fish_team = [158, 157, 163, 157, 145]
>>> monk_fish_team.sort()
>>> monk_fish_team
[145, 157, 157, 158, 163]
```

* `sort()`メソッドは、何も引数を与えずに呼び出すデフォルトの動作では、数値を昇順(小さい順)にソートするようになっている

* 引数を与えることで、並べ替えの仕方を変更することができる

  * 例)`reverse`というキーワード引数を指定してTrueを渡すと、並び順を降順(大きい順)に変更できる

  ```python
  >>> monk_fish_team.sort(reverse=True)
  >>> monk_fish_team
  [163, 158, 157, 157, 145]
  ```



## ソート順をカスタマイズする

* `sort()`メソッドの書式は、以下のようになっている

  => `S`は処理の対象となるリストを表す

```python
S.sort(key, reverse)
```

* `sort()`メソッドの引数は、他のメソッドと異なり、`引数のキーワード指定`が必須になっている

* `key`には順番を決める基準を返す関数を渡すことで、ソート順をカスタマイズできる

* `reverse`引数は、並び順を降順にする場合にTrueを指定する

  => デフォルトはFalseで、昇順に並べ替える

* 例)戦車の名前、速度、装甲厚、主砲口径のデータを元に、戦車を強い順にソートする

  => タプル型

```python
>>> tank_data = [("Ⅳ号戦車", 38, 80, 75), ("LT-38", 42, 50, 37),
...              ("八九式中戦車", 20, 17, 57), ("Ⅲ号突破砲", 40, 50, 75),
...              ("M3中戦車", 39, 51, 75)]
```

* このデータ型をソートするために、「速度、装甲厚、主砲口径を足した数値が大きい方が強い」というルールを使う

```python
>>> def evaluate_tankdata(tup):
...   return tup[1]+tup[2]+tup[3]
...
```

* 各戦車の強さを比較する

```python
>>> evaluate_tankdata(tank_data[0])
193
>>> evaluate_tankdata(tank_data[4])
165
```

* この関数を、`sort()`メソッドの引数keyに渡す

  => 関数名をそのまま引数として渡すことで、リストの要素を関数に渡しながら評価して、要素をソートしてくれる

```python
>>> tank_data.sort(key=evaluate_tankdata, reverse=True)
>>> tank_data
[('Ⅳ号戦車', 38, 80, 75), ('Ⅲ号突破砲', 40, 50, 75), ('M3中戦車', 39, 51, 75), ('LT-38', 42, 50, 37), ('八九式中戦車', 20, 17, 57)]
```



## アンパック代入

* スライスを使った代入に似た機能として、`アンパック代入`がある

  * イコール`=`の左右に複数の要素を記入して、一度に複数の要素に対して代入を行う機能

  * アンパック代入では、イコールの左右で要素数が揃っていないとエラーになる

* アンパック代入を使うと、次のように一発で変数の入れ替え(Swap)を実行できる

  => 変数などを使って要素を保存しておく必要がない

```python
>>> a = 1
>>> b = 2
>>> b, a = a, b
>>> print(a, b)
2 1
```



## スライスのステップ数

* スライスに与えるコロン`:`で区切ったパラメータは、3つ与えることもできる

* 3つ目の数値は、`ステップ`として扱える

  => `スライス`：n個飛ばしながら要素を取り出す

```python
>>> a = [1, 2, 3, 4, 5]
>>> a
[1, 2, 3, 4, 5]
>>> a[1:4]
[2, 3, 4]
>>> a[2:100]
[3, 4, 5]
>>> a[::2]   # リストから偶数番目の要素を取り出す
[1, 3, 5]
```



## スライスを使った要素の代入と削除

* スライスと代入を組み合わせると、リストの複数の要素を一括して置き換えることができる

* 置き換えを行いたい要素をスライスで指定し、イコール`=`の左側に置く

* 置きたい要素をイコール`=`の右側に置く

  => 右側の要素は、リストやタプルなどのシーケンスである必要がある

```python
>>> a = [1, 2, 3, 4, 5]
>>> a[2:4] = ['Three', 'Four', 'Five']
>>> a
[1, 2, 'Three', 'Four', 'Five', 5]
```

* イコールの左側では、(0から数えて)2番目と3番目の要素をスライスで指定している

* 右側の要素では、3つの文字列を持ったリストを指定する

* 左右で要素の数が異なる場合でも、自動的に整合性を保つように処理をしてくれる

* `del`文とスライスを組み合わせると、複数の要素をいっぺんに削除することができる

```python
>>> a = [1, 2, 3, 4, 5]
>>> del a[2:]
>>> a
[1, 2]
```



## リストで利用できるメソッド

> * 「L」：処理の対象となるリスト(書き換え可能なシーケンス)オブジェクト

> * 「[]」内の引数は、オプション(省略可)

* `reverse()`：リストLの並び順を反転し、S自体を書き換える

```python
L.reverse()
```

* `remove()`：リストLの中から`取り除く要素`を探し出し、要素をL自体から削除する

  * 引数として指定された要素が見つからない場合は、例外(エラー)を発生する

```python
L.remove(取り除く要素)
```

* `append()`：リストLの末尾に`追加する要素`を追加し、L自体を書き換える

```python
L.append(追加する要素)
```

* `extend()`：リストLの末尾に`追加するシーケンス`の各要素を連結する

  * `append()`メソッドと違い、複数の要素を追加したい時に利用する

```python
L.extend(追加するシーケンス)
```

* `pop()`：リストLの要素を1つだけ取り除き、戻り値として取り除いた要素を返す

  * L自体を書き換える

  * 引数としてインデックスに相当する数値を指定しないと、Lの末尾を対象に操作を行う

```python
L.pop([インデックス])
```

* `index()`：文字列メソッドの`index()`と同じ処理をする

  * リストLの中から`検索したい要素`を探し出し、インデックスを返す

  * 見つからなかった場合は、「ValueError」という例外(エラー)を発生する

```python
L.index(検索したい要素[, 開始インデックス[, 終了インデックス]])
```



| 版 |  年月日   |
|---|----------|
|初版|2019/01/19|
