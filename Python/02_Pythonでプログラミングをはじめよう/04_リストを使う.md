04 リストを使う
=============

* `リスト`：複数のデータを並べて管理し、効率的に扱う

* Pythonのリストでは、Pythonで扱うデータならなんでも放り込むことができる

  => 例)文字列、数値



## リストを定義する

* Pythonでリスト型を定義するには、`角カッコ[〜]`を使う

* `角カッコ`の中に、リストの要素を並べていく

```python
[要素0, 要素1, 要素2, ...]
```

* 例)東京の日中の平均気温

```python
tokyo_temps = [15.1, 15.4, 15.2, 15.4, 17.0, 16.9]
```



## インデックスを指定して要素を取り出す

* リストには、複数の要素が入っている

* リストの中の要素には、`インデックス(見出し番号)`と呼ばれる番号が振ってある

* リストの`インデックス`は、`0`から始まる

  => 先ほどのリストでは、6個の要素があったが、0から5までの`インデックス`が振られている

* インデックスを使うと、リストの要素を取り出すことができる

  => リストに角カッコを添えて、その中に`インデックス`を数値で書き込むことで、リストの要素を取り出すことができる

```python
リスト名[要素のインデックス]
```

* 例)tokyo_tempsに入っているリストの0番目には、1950年の平均気温が入っている

  => これを取り出す

  ```python
  >>> tokyo_temps[0]
  15.1
  ```

* リストの最後(インデックスが5番目)の要素は、2000年の平均気温

  => この数値と0番目の要素(1950年の平均気温)の差を調べる

  ```python
  >>> tokyo_temps[5] - tokyo_temps[0]
  1.799999999999999
  ```

* 要素数を超えるインデックスを添えると、エラーが発生する

* インデックスには、マイナスの数字を与えることができる

  * インデックスに`-1`を与えると、リストの一番最後の要素を指定できる

  ```python
  # tokyo_temps[5] - tokyo_temps[0]と同じ
  >>> tokyo_temps[-1] - tokyo_temps[0]
  1.799999999999999
  ```

  * `-1`を使うと、リストの長さに関係なく、一番最後の要素を指定できる

  * `-2`は、最後から数えて2番目となる

   => リストの長さ分までマイナスを指定できるので、リストの長さを超えるマイナスの数では、エラーとなる



## リストの連結

* Pythonでは、リストを足し算することができる

* リストの足し算をすると、2つのリストを連結した新しいリストを作ることができる

* 例)1900年から1940年までの東京の平均気温と、1950年から2000年までの東京の平均気温のリストで、足し算をする

```python
>>> tokyo_temps = [15.1, 15.4, 15.2, 15.4, 17.0, 16.9]
>>> e_tokyo_temps = [13.6, 13.5, 14.2, 14.8, 14.8]
>>> tokyo_temps2 = e_tokyo_temps + tokyo_temps
>>> tokyo_temps2
[13.6, 13.5, 14.2, 14.8, 14.8, 15.1, 15.4, 15.2, 15.4, 17.0, 16.9]
```



## 要素の置き換え、削除

* インデックスを使うことで、リストに対して色々な操作を行える

* インデックス指定と、イコールを使った代入を組み合わせることで、リストの要素を置き換えることができる

```python
>>> mcz = ["れに", "あかり", "かなこ", "しおり", "あやか", "ゆきな"]
>>> mcz
['れに', 'あかり', 'かなこ', 'しおり', 'あやか', 'ゆきな']
```

* リストの最後の要素(5)の文字列を置き換える

```python
>>> mcz[5] = "ももか"
>>> mcz
['れに', 'あかり', 'かなこ', 'しおり', 'あやか', 'ももか']
```

  => リストの要素を操作すると、リスト自体が書き換わる

* インデックスを指定して、リストの要素を削除できる

* `del文`：リストの要素を削除する

```python
>>> del mcz[0]
>>> mcz
['あかり', 'かなこ', 'しおり', 'あやか', 'ももか']
```

* リスト自体が書き換わり、最初の要素が削除されている

* リストの最初の要素を削除すると、リストの長さが要素1つ分短くなる

  => 要素が1つずつずれるので、削除前の要素はインデックスが変わる

  => 例)「あかり」は1番目の要素だったが、「れに」を削除した後は、インデックスが0になり、先頭の要素となった



## スライスを利用して複数の要素を取り出す

* `スライス`：リストに入っている要素のうち、連続した複数の要素を指定する記法

* スライスは、インデックスを使った要素指定の記法を拡張したもの

  => リストの要素を指定する時には、角カッコを使う

  * 角カッコの中に、`コロン:`で区切ったインデックスを記述する

```python
リスト名[最初の要素のインデックス:最後の要素のインデックス]
```

* コロンの右側にくるインデックスは、取り出したい要素のインデックスに1を足す必要がある

  => `[1:3]`：1番目と3番目の要素の前を囲んだ要素を指定する

  => 例)0から数えて1番目と2番目の要素を取り出し、新しい変数に代入する

```python
>>> momotamai = mcz[1:3]
>>> momotamai
['かなこ', 'しおり']
```

* スライスでは、取り出した要素のコピーを取り出す

  => 元のリストは変更されず、元のまま戻る

* スライスが返すのはリスト。スライスの結果が返ってくる要素が1つでも、結果としてリストが返ってくる

* スライスでは、コロンの左右にあるインデックスを省略できる

  * 左側を省略：最初の要素から始める

  * 右側を省略：最後の要素までを操作の対象にする

```python
>>> mcz[:2]
['あかり', 'かなこ']
>>> mcz[1:]
['かなこ', 'しおり', 'あやか', 'ももか']
```



## リストのリスト 2次元配列

* 一次元配列：1つの数値だけで要素を指し示せる表

* 二次元配列：Excelの表のように、縦横に要素が並んでいて、要素を指し示すのに2つの数値(縦軸、横軸)が必要な表

  => Pythonでは「リストのリスト」を作ることで2次元配列を表現できる

* 例)1930年から2000年までの平均気温

|都市名/年|1930|1940|1950|1960|1970|1980|1990|2000|
|--------|----|----|----|----|----|----|----|----|
| 東京都 |14.8| 14.8|15.1|15.4|15.2|15.4|17.0|16.9|
| 秋田市 |10.0| 10.4|11.5|11.2|10.9|10.6|11.8|12.2|
| 熊本市 |16.0| 15.5|15.9|16.4|15.9|15.6|17.5|17.1|

  => 横軸に年(西暦)、縦軸に都市を取って表をPythonに取り込む(二次元配列：リストの中にリストを定義)

```python
city_temps = [
[14.8, 14.8, 15.1, 15.4, 15.2, 15.4, 17.0, 16.9],
[10.0, 10.4, 11.5, 11.2, 10.9, 10.6, 11.8, 12.2],
[16.0, 15.5, 15.9, 16.4, 15.9, 15.6, 17.5, 17.1]
]
```

* 秋田市の長期平均気温は、city_tempsの0から数えて1番目にリストとして格納されている

```python
>>> city_temps[1]
[10.0, 10.4, 11.5, 11.2, 10.9, 10.6, 11.8, 12.2]
```

* 熊本市の平均気温を、1930年と2000年で比較する

  => city_temps[2]として熊本市の平均気温リストを取り出し、1930年(0番目)、2000年(7番目)の気温を取り出す

```python
>>> city_temps[2][7] - city_temps[2][0]
1.1000000000000014
```



## リストの合計、最大値、最小値

* `sum()`：リストの合計を得るための組み込み関数

* 例)身長リスト

```python
>>> monk_fish_team = [158, 157, 163, 157, 145]
>>> sum(monk_fish_team)
780
```

* `max()`：リストの最大値を計算する組み込みクラス

* `min()`：リストの最小値を計算する組み込みクラス

```python
>>> max(monk_fish_team)
163
>>> min(monk_fish_team)
145
```



## リストの長さを調べる

* `len()`：リストにいくつの要素が入っているのか(要素数)を調べる

* 例)身長リストの要素数を調べる

```python
>>> len(monk_fish_team)
5
```

* 合計を長さ(要素数)で割ることで、平均を計算する

```python
>>> monk_sum = sum(monk_fish_team)
>>> monk_len = len(monk_fish_team)
>>> monk_mean = monk_sum / monk_len
>>> monk_mean
156.0
```



| 版 |  年月日   |
|---|----------|
|初版|2018/12/22|
