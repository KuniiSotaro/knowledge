03 gzipコマンド
==============

* `gzip`コマンド：ファイルの圧縮・展開を行うコマンド

  * `gzip`で圧縮したファイルには、慣習として`.gz`という拡張をつける

  ```bash
  gzip <圧縮元ファイル>
  ```

  * 例)`ps`コマンドでプロセス一覧を表示した結果を`ps.txt`というファイルに出力リダイレクトとして作成

  ```bash
  $ ps aux > ps.txt
  $ ls -l
  -rw-r--r--   1 MacUser  staff  59712  4 14 13:28 ps.txt
  ```

  * 例)このファイルを、`gzip`コマンドで圧縮する

  ```bash
  $ gzip ps.txt
  $ ls -l
  -rw-r--r--   1 MacUser  staff  11898  4 14 13:28 ps.txt.gz
  ```

  * `gzip`による圧縮で、元のファイルが1.5キロバイトほどに圧縮された

  * また、`gzip`コマンド実行後には圧縮ファイルだけが残り、元のファイルは削除される

  * 圧縮ファイルは、元のファイル名の後ろに`.gz`を付けたファイル名となる

* `d`オプション：圧縮したファイルを展開して元に戻す

  * `gunzip`コマンドも同様の処理を行う

  ```bash
  $ gzip -d ps.txt.gz
  $ ls -l
  -rw-r--r--   1 MacUser  staff  59712  4 14 13:28 ps.txt
  ```

  * この場合も展開されたファイルのみが残り、圧縮ファイル(gzファイル)は削除される



## 標準出力にgzipファイルを出力

* `c`オプション：`gzip`の出力をパイプやリダイレクトで扱う

  * これは、標準出力に出力するためのオプション

  * 出力リダイレクトを使えば、任意の名前で圧縮ファイルを作成することができる

  ```bash
  $ gzip -c ps.txt > ps_test.txt.gz
  $ ls
  ps.txt ps_test.txt.gz
  ```

  * なお、`gzip`コマンドの出力は、ファイルが圧縮されたバイナリデータ

  => そのため、`c`オプションを利用する際には直接ターミナルに表示せず、必ずパイプやリダイレクトを利用する



## tarとgzipを組み合わせる

* `gzip`コマンドにはファイルをアーカイブする機能はないので、1つのファイルしか圧縮できない

  * そのため、複数のファイルをまとめて1つのファイルに圧縮するには、`tar`コマンドで1つのファイルにアーカイブしてから行う

* `z`オプション：`tar`コマンドのオプション

  * `gzip`圧縮する機能が組み込まれている

  * `c`オプションでアーカイブを作成する際に、合わせて使用する

  ```bash
  $ tar czf dir1.tar.gz dir1
  ```

  * `x`オプションで展開する際に、合わせて使用する

  ```bash
  $ tar xzf dir1.tar.gz
  ```



| 版 |  年/月/日 |
|----|----------|
|初版|2019/04/14|
