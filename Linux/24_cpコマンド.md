06 cpコマンド
===========

* `cp`コマンド：ファイルをコピーする

```bash
cp [オプション] <コピー元> ... <コピー先>
```

* 例)`file1`を`file2`という名前でコピーする

```bash
$ touch file1
$ cp file1 file2
$ ls -F
dir1/ file1 file2
```

* コピー先にディレクトリを指定した場合には、コピー元のファイルをそのディレクトリ内に、同一ファイルでコピーする

* 例)カレントディレクトリの`file1`というファイルを、`dir1`というディレクトリの中にコピーする

```bash
$ cp file1 dir1
$ ls dir1
file1
```

* ディレクトリ内にファイルをコピーする際には、複数のファイルをまとめて指定できる

  * この際`cp`コマンドは、引数の最後に指定したディレクトリへファイルをコピーする

  * 例)ディレクトリ`dir2`に、`file1`、`file2`、`file3`の3つのファイルがコピーされる

```bash
$ touch file3
$ mkdir dir2
$ cp file1 file2 file3 dir2
$ ls dir2
file1 file2 file3
```

* 複数ファイルをまとめてコピーする際には、パス名展開をすると便利

  * 例)拡張子`.txt`をまとめてディレクトリ`backupdir`にコピーする

```bash
$ cp *.txt backupdir
```



## コピーの際に、上書き確認する

* `cp`コマンドはコピー先のファイルが既に存在していても、確認などせずにそのまま上書きしてしまう

```bash
$ ls
file1 file2
$ cp file1 file2       # file1をfile2という名前でコピーする
$                      # 正常に実行されてしまい、元のfile2とうファイルは上書きされてしまう
```

* `cp`コマンドに上書き確認をしてほしい場合には、`-i`オプションをつける

```bash
$ ls
file1 file2
$ cp -i file1 file2
cp: overwrite 'file2'?    # 上書き確認がされたので、y(yes)を入力
$
```



## ディレクトリのコピー

* `cp`コマンドでは、ディレクトリをコピーするとエラーとなる

```bash
$ cp dir2 dir3
cp: omiting directory 'dir2'
$
```

* ディレクトリをコピーするには、再帰的にコピーを実行する`-r`オプションを指定する必要がある

* この場合、ディレクトリ`dir3`が存在していなければ、`dir2`を`dir3`という名前でコピーする

  * 一方、`dir3`というディレクトリが既に存在している場合は、コピー先にディレクトリを指定したと見なされ、`dir2`を`dir3`の中に名前を変えずにコピーする

* `-r`オプションでディレクトリをコピーすると、コピー元ディレクトリの中にあったファイルやディレクトリも全て含めたままコピーされる

```bash
$ ls -F
dir1/ dir2/ file1 file2 file3
$ ls dir2
file1 file2 file3
$ cp -r dir2 dir3
$ ls dir3
dir2
```



| 版 |  年/月/日 |
|----|----------|
|初版|2019/02/03|
