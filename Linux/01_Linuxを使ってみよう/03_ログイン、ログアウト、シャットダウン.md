03 ログイン、ログアウト、シャットダウン
=================================

## ログイン

* Linuxを使うためには、マシンが起動した後にまずはログインする必要がある

* インストール時に設定した、`ユーザ名`と`パスワード`を入力する

* ログインが完了すると、テキストログインの場合はシェルが起動して、プロンプト`$`が表示される



## GUIとCLI

* `GUI`：マウスやタッチパッドなどのポインティングデバイスを用いて、画面上のメニューやアイコンをクリックして様々な操作を行う

* `CLI`：キーボードからコマンドなどを入力し、文字列として結果を出力するインターフェース

* 例)ファイル`a.txt`を`b.txt`というファイル名でコピーする

  * GUI：マウスでファイルアイコンをクリックしてコピー操作を行う

  * CLI：ファイルをコピーするための`cp`コマンドを用いて、以下の文字列をキーボードから入力する

    ```bash
    cp a.txt b.txt
    ```



### CLIのメリット

1. 作業効率がよくなる

  * 例)あるディレクトリから、ファイル名が`a`から始まるファイルを全て選択する

  * GUIならば、ファイル名が`a`で始まるファイルを1つずつクリックする必要があるが、CLIでは以下のコマンドで見つけることができる

  ```bash
  ls a*
  ```

1. GUIの操作を覚えてもあまり意味がない

  * GUIはあくまで部品にすぎないため、操作方法を覚えてもあまり意味がない

  * GUIも内部ではCLIによって処理されているので、内部のCLIを学んだ方がより本質的で、基礎知識としてずっと役に立つ

  * LinuxにおいてはCLIこそが本質であり、基礎である

1. プログラムの連携がしやすい

  * Linuxでは、たくさんの小さなプログラムが部品として振舞って、連携することによって大きなシステムを作り上げている

  * 例)入出力をプログラム間でやり取りする(パイプ`|`)

    ```bash
    grep "abc" sample.txt | sort
    ```

  * 上の例では、`grep`というコマンドと、`sort`というコマンドを利用して、`sample.txt`というファイルから"abc"という文字列を検索し、その出力結果をソートしている

  * `grep`コマンドと`sort`コマンドをパイプ`|`で繋ぐことで、簡単にプログラムの連携が行える

  * LinuxのCLIでは、たくさんの小さなコマンドを組み合わせて、複雑な処理を簡単に記述できる

1. 処理の自動化がしやすい

  * CLIでは実行したいコマンドを文字列として入力し、操作を行うが、コマンドはキーボードから手で入力するだけでなく、ファイルに書いて実行させることもできる

  * このようなコマンドが書かれたファイルを再利用することで、定型的な操作を毎回素早く正確に行うことができる

  * プログラムの連携がしやすいことを利用して、複数のコマンドを組み合わせて自分だけのコマンドを作ることができる



## ログアウト

* Linuxに対して、「これで作業は終わりです」と伝えることを、`ログアウト`と呼ぶ

* 作業が終わったのにログアウトせずに放っておくと、余計なリソースを使うため、コンピュータ資源の無駄となる

* `exit`：テキストログインの場合にログアウトする

  * 現在のシェルを終了させるという意味

  * シェルが終了することにより、自動的にログアウトされる

```bash
exit
```

* `logout`：テキストログインの場合にログアウトする

  * 現在のシェルがログインシェルである場合しか動作しない

```bash
loguout
```



## シャットダウン

* `シャットダウン`：コンピュータの電源を切るために、OSを完全に停止させること

  * コンピュータを利用する際は、シャットダウンせずに電源を切ってはいけない

    => バックグラウンドで様々なプログラムが動いているため

* `shutodown`：Linuxをシャットダウンする

  * root権限を持つスーパーユーザでしか実行できない

* 以下、ログアウトの手順

1. ログインしているならば、一回ログアウトする

1. ユーザー名に`root`、パスワードにインストール時に設定した「rootパスワード」を入力してログインし直す

  * `su`コマンドを実行して、`root`ユーザになることも可能

  ```bash
  [xxx@localhost ~]$ su
  パスワード:             # rootパスワードを入力
  [root@localhost xxx]#
  ```

  * `root`ユーザになると、プロンプトの記号が`$`から`#`に変わる

  * この状態で`shutodown`コマンドを実行して、電源を切る

  ```bash
  # shutodown -h  now
  ```

  * `-h`：電源断を意味するオプション

  * `-r`：再起動するオプション

  ```bash
  shutodown -r now
  ```

  * フルパスの場合は、以下のように入力する

  ```bash
  /sbin/shutodown -h now
  ```



### Linuxとシャットダウン

* Windowsパソコンなどを利用する際には、使い終わったらシャットダウンするのが普通

* Linuxでは、ログアウトはするがシャットダウンはしないで動かし続けるという利用シーンが多く見られる

* 特に、業務用サービスを提供しているLinuxサーバでは、何年もの間シャットダウンせずに動かし続ける

  => メンテナンスや障害対応などのシーンでシャットダウンする



| 版 |  年/月/日 |
|----|----------|
|初版|2019/01/31|
