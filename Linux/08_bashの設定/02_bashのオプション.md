02 bashのオプション
=================

* bashでは、シェル自身が持つ様々な機能を利用するためにオプションを指定することができる

* オプションは1つ1つの機能ごとに、「オン」「オフ」いずれかの値を取ることにより、bashの各機能の有効・無効を指定できる



## setコマンド

* `set`コマンド：オプションを設定する

  * `-o`：オプションのオンを指定する

  * `+o`：オプションのオフを設定する

  ```bash
  set -o/+o <オプション名>
  ```

* 例)`ignoreeof`というオプションをオンに設定する

```bash
$ set -o ignoreeof                # Ctrl+Dを無視するように設定
$                                 # Ctrl+Dを入力
Use "logout" to leave the shell
$
```

* `ignoreeof`：Ctrl+Dを押してもシェルを終了しないオプション

  * 誤ったキー操作でシェルが終了するのを防ぐことができる

* 表. setコマンドのオプション

| オプション名 | 内容                                                                   |
| :----------- | :--------------------------------------------------------------------- |
| `ignoreeof`  | Ctrl+Dを押してもシェルを終了しない                                     |
| `noclobber`  | 既に存在するファイルをリダイレクトで上書きしない                       |
| `noglob`     | パス名展開を無効にする。`*`などはシェルに解釈されず、そのまま`*`となる |



## shoptコマンド

* `shopt`コマンド：オプションを設定する

  * `-s`：オプションをオンに設定する

  * `u`：オプションをオフに設定する

  * `shopt`で指定するオプション名は`set`で指定するものとは異なる

* 表. shoptコマンドのオプション

| オプション名 | 内容                                                                                         |
| ------------ | -------------------------------------------------------------------------------------------- |
| `autocd`     | ディレクトリ名のコマンドを実行すると、それが`cd`コマンドの引数に指定されたものとして実行する |
| `dotglob`    | `*`や`?`を使ったパス名展開の結果に、`.`で始まるファイルも含める                              |
| `cdspell`    | `cd`コマンド実行時、ディレクトリのちょっとしたミスタイプが自動修正される                     |
| `globstar`   | パス名展開で`**`と言うパターンを使うと、サブディレクトリまで含めた全てのファイルにマッチする |
| `histappend` | bashを終了するとき、履歴ファイルにコマンド履歴を追記し、上書きしない                         |

* `shopt`は比較的最近登場したコマンドで、`set`コマンドより使いにくいが、設定できる項目は非常に多い

* 例)`cdspell`というオプションを設定した例

```bash
$ shopt -s cdspell
$ ls -F
media/
$ cd mediaa           # mediaと間違えてmediaaと打ってしまった
media                 # 自動修正されて「media」とみなされた
$ pwd                 # タイプミスしたが、修正されて正しく移動できている
/home/xxx/work/media
$
```



| 版 |  年/月/日 |
|----|----------|
|初版|2019/02/14|
