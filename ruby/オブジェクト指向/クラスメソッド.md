# 4-5.クラスメソッド

* クラスメソッド：クラスオブジェクトをレシーバとするメソッド

  例)新たにインスタンスを作成する`new`メソッド

* Rubyのクラスメソッドは、クラスに対する特異クラスのメソッドとして定義される

## 4-5-1.`Class`クラス

* クラスオブジェクト：`Class`クラスのオブジェクト

  →`Class`クラスはクラスを定義する **クラス**

```ruby
>> "hello".class
=> String
>> String.class
=> Class
```

* `Class`クラスのインスタンスは、クラスそのもの

* `Class.new`を呼び出すことで、新しいクラスを生成している。他のオブジェクトのように操作することが可能

```ruby
>> SomeClass = Class.new
=> SomeClass
>> SomeClass.new
=> #<SomeClass:0x007f7ee000e360>
```

* オブジェクトと同様に、クラスにもメソッドがある。

  * オブジェクトのメソッド：そのクラスのインスタンスメソッド

  * クラスのメソッド：`Class`クラスのインスタンスメソッド

    * `new`：オブジェクトを生成する時に使用

    * `allocate`：`new`メソッドを補助(インスタンスの生成時に、`initialize`を呼び出さない)

    * `superclass`：継承を表す

```ruby
>> Class.instance_methods(false)
=> [:new, :allocate, :superclass]

# superclassメソッド
>> Array.superclass
=> Object
>> Object.superclass
=> BasicObject
```

### `Class`クラスのスーパークラス

```ruby
>> Class.superclass
=> Module
>> Class.superclass.superclass
=> Object
```

* `Class`のスーパークラスは`Module`：全てのクラスはモジュール

  * クラス：オブジェクトの生成やクラス継承をするための3つのインスタンスメソッドを追加したモジュール

* クラスとモジュールは密接に結びついているため、同じ役割を担う「モノ」とみなしている

  * モジュール：どこかでインクルードする時に使用

  * クラス：インスタンスの生成や継承する時に使用

***

### `Class`クラスの生成

```ruby
>> class Foo
>>   def initialize(a)
>>     @a
>>   end
>>   def method1
>>     @a
>>   end
>> end
=> :method1
>>
?> FooExt = Class.new(Foo) do   # superclassはFoo
?>   def initialize(a,b)        # FooExtクラスの初期化メソッド
>>     @b = b
>>     super(a)
>>   end
>>   def method2(c)             # インスタンスメソッドmethod2の定義
>>     @a + @b + @c
>>   end
>> end
=> FooExt
```
