## 3-2.数値
**Rubyのリテラル**
`リテラル`とは・・・
変数と対になるもの。プログラムにそのまま記述する値(定数)。
→変更されないことを前提とする

* 数値
* 論理値
* 文字列
* シンボル
* 配列
* ハッシュ
* 範囲
* 正規表現
* コマンド出力

試験では、各リテラルについて

* どのように書くのか
* 何ができるのか

を即答できるようになる必要がある。

***

### 3-2-1.数値リテラル
Rubyでは、`整数`と`浮動小数点数`がリテラル構文でサポートされている

#### 数値リテラルの例

```ruby
>> +12      # 正負の判定(この場合は、正)
=> 12
>> -12      # 正負の判定(この場合は、負)
=> -12
>> 0.1      # 小数
=> 0.1
>> 3.0e2    # eを用いた指数表現(この場合は、3.0に10の2乗を乗算)
=> 300.0
>> 3.0e-2   # eを用いた指数表現(この場合は、3.0に10のマイナス2乗を乗算)
=> 0.03
```

***

#### 基数指定子
何進数で解釈させるかを指定

```ruby
>> 0b10     # 2進数(binary)：0b
=> 2
>> 0o10     # 8進数(octal)：0o
=> 8
>> 010      # 8進数(octal)：0 → 別の表記
=> 8
>> 0d10     # 10進数(decimal)：0d
=> 10
>> 0x10     # 16進数(hexadecimal)：0x
=> 16
```

|        進数       |基数指定子|    例    |
|------------------|---------|----------|
|   2進数(binary)   |    0b  |0b10 => 2 |
|   8進数(octal)    |  0o/0  |0o10 => 8 |
|  10進数(decimal)  |   0d   |0d10 => 10|
|16進数(hexadecimal)|   0x   |0x10 => 16|


※表示できない数字を指定した例

```ruby
>> 0b2      # 2は2進数ではありえない
SyntaxError: (irb):6: numeric literal without digits
>> 0d1.1    # 小数は表せない
SyntaxError: (irb):7: unexpected fraction part after numeric literal

# Silverで間違えている！！
>> 080     # 8進数で8はありえない！！
SyntaxError: (irb):1: Invalid octal digit
```

***

#### 数値リテラルでの特殊な例
数値リテラルの中で、アンダースコア`_`が指定できる(Rubyインタプリタは`_`を無視する)
→桁数を見やすく記述することなどに利用

```ruby
>> 100_000_000
=> 100000000
```

***

#### `?`に続く文字のリテラル
`?`に続いて文字を指定すると、指定した文字の`String表現`を返す
→入力されたキーを判定する時などに利用

```ruby
>> ?R         # 文字Rを表すString
=> "R"
>> ?\C-v      # コントロール(Ctrl)キー+vを表すString
=> "\u0016"
>> ?\M-a      # メタ(Alt)キー+aを表すString
=> "\xE1"
>> ?\n        # 改行を表すString
=> "\n"
```

以下、Silverで間違えた問題

```ruby
>> p ?A
"A"
=> "A"
```

***

#### 有理数、複素数のリテラル
**有理数(Rationalクラス)**
`r`を付加することで表現

**複素数(Complexクラス)**
`i`を付加することで、複素数の`虚数部`を表現

```ruby
>> (42/10r).class
=> Rational
>> 42/10r
=> (21/5)
>> 3.14r
=> (157/50)

>> 42i.class
=> Complex
>> 42i
=> (0+42i)
>> 3.14i
=> (0+3.14i)

>> 42ri              # 虚数部が有理数の複素数になる
=> (0+(42/1)*i)
>> 3.14ri            # 有理数にして、虚数部に変換
=> (0+(157/50)*i)
```

***

### 3-2-2.数値演算

#### 簡単な数値演算

```ruby
# 演算
>> 1 + 2     # 足し算
=> 3
>> 1 - 2     # 引き算
=> -1
>> 2 * 3     # 掛け算
=> 6
>> 4 / 2     # 割り算
=> 2
>> 4 % 3     #4を3で割った余り
=> 1

# 比較
>> 1 == 1    # 1と1は等しいか
=> true
>> 1 != 2    # 1と2は等しくないか
=> true
>> 1 < 2     # 1よりも2の方が大きいか
=> true
>> 2 >= 2    # 2は2以上であるか
=> true
```

***

#### UFO演算子
比較の結果を数値で返す、`比較演算子`
→ソート処理などで、順番の決定などに使用

```ruby
>> 100 <=> 10     # 左辺の値>右辺の値の時は、1
=> 1
>> 100 <=> 100    # 左辺の値=右辺の値の時は、0
=> 0
>> 10 <=> 100     # 左辺の値<右辺の値の時は、-1
=> -1
```

イメージとしては、天秤の両側に値を乗せて

* 左が沈んだら`1`
* 同じであれば`0`
* 右が沈んだら`-1`

***

#### 自己代入演算子

```ruby
>> a = 100
=> 100
>> a += 1    # a = a + 1
=> 101
>> a -= 1    # a = a - 1
=> 100
>> a *= 2    # a = a * 2
=> 200
>> a **=2    # a = a ** 2(aの2乗を返す)
=> 40000
```

***

### 3-2-3.数値クラスと演算子の再定義
Rubyでは、`全ての値が何らかのクラスのインスタンス`になっている
→生成元のクラスは、`classメソッド`で参照可能

```ruby
>> 1.class     # Integerクラス
=> Integer
>> 1.2.class
=> Float       # Floatクラス
```

***

#### 継承クラスの参照
どのような演算が可能か、対応するクラスのメソッドを調べる。

自身でメソッドを定義することで、

* 既存のものを再定義
* 独自のクラスに演算子を定義

することが可能

```ruby
>> 1.class.superclass                         # Numericクラス(数値を表現するクラス)
=> Numeric
>> 1.class.superclass.superclass              # Objectクラス(全てのクラスの親クラス)
=> Object
>> 1.class.superclass.superclass.superclass   # BasicObjectクラス(Objectクラスの親クラス。メソッドが白紙のクラス)
=> BasicObject
```

***

#### 再定義できない演算子

Silverで間違えているので、注意！！

* スコープ演算子：`::`
* 代入演算子：`=`
* 条件演算子：`?:`
* 範囲演算子：`..`、`...`
* 論理演算子：`&&`、`and`、`||`、`or`、`not`
* 自己代入演算子

***

### 3-2-4.メソッド

#### メソッドの定義方法
`def`式の内部には、実行する処理を記述
一番最後に評価した式の結果が返り値

```ruby
def <メソッド> <引数リスト>
end
```

`引数リスト`：カッコを付けることも、省略することも可能(`仮引数`とも言う)

***

例)

```ruby
>> def foo a, b   # 引数で受けた2つの値を足して呼び出し元に返す
>>   a + b
>> end
=> :foo
```

***

#### メソッドの実行
呼び出しは、
`メソッド名(実引数)`

※実引数：メソッドを実行する際に記述する引数

```ruby
>> foo(1, 2)      # メソッド名を記述することで実行(引数がある場合には、メソッド名に続いて記述)
=> 3
>> foo 2, 3       # メソッド名は、カッコで囲んでも、省略してもOK
=> 5
```

***

#### 引数のデフォルト値
`仮引数`では、`デフォルト値`を指定できる

```ruby
>> def foo(a, b=100)
>> a + b
>> end
=> :foo
>> foo(2, 3)          # 指定された実引数の数が足りる場合
=> 5
>> foo(1)             # 実引数が足りない場合に、仮引数にデフォルトの値が格納されて実行
=> 101
>> foo                # デフォルトの値を合わせても引数の数が足りないため、例外
ArgumentError: wrong number of arguments (given 0, expected 1..2)
```

***

#### キーワード引数を用いたメソッドの定義
`キーワード引数`とは・・・
`仮引数名`と`デフォルト値`を、 **コロン`:`** で結びつけて定義可能

```ruby
>> def foo(a:, b: 100)        # コードをキーワード引数で定義
>>   a + b
>> end
=> :foo
>> foo(a: 2, b: 3)            # 呼び出しの際にハッシュオブジェクトを渡す
=> 5
>> foo(a: 1)                  # 仮引数にデフォルトの値が格納され、実行
=> 101
>> foo                        # デフォルトの値がないキーワードを省略すると、例外
ArgumentError: missing keyword: a
>> foo(a: 2, c: 100)          # キーワード引数に存在しない引数名を渡すと、例外
ArgumentError: unknown keyword: c
```

***

#### キーワード引数に任意の引数を使用する

定義した名前以外を引数として渡すと例外・・・
→任意の値をハッシュに格納することで対処

```ruby
>> def bar(a:, b: 100, **z)
>> p z
>> a + b
>> end
=> :bar
>> bar(a: 2, c: 100, d: 200)
{:c=>100, :d=>200}
=> 102
```

***
