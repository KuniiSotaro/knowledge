3-8.範囲
========

## 3-8-1.範囲リテラル

* 式の間に`..`を記述することで生成

  * 点が2つ`..`： **以下**

  * 点が3つ`...`： **未満** 。ただし、右の値は含む

* 範囲リテラルで生成した値は、 **範囲オブジェクト** と呼ばれる。

  →`Range`クラスのインスタンス

  * `include?`メソッドを使用して、引数で指定した値が範囲に含まれているかどうかを判定可能

  * `==`：同値判定

  * `===`：包括判定

```ruby
>> (1..5).include?(5)   # 1以上5以下なので、5を含む
=> true
>> (1...5).include?(5)  # 1以上5未満なので、5を含まない
=> false
>> (1..5) == 3
=> false
>> (1..5) === 3
=> true
>> (1..5) === 9
=> false
```

***

### for式に範囲オブジェクトを適用

```ruby
>> for i in "a".."e"
>> p i
>> end
"a"
"b"
"c"
"d"
"e"
=> "a".."e"
```

***

### 配列の添字演算子に範囲オブジェクトを適用

```ruby
# 配列の添字演算子に範囲オブジェクトを適用
>> a = ["a", "b", "c", "d", "e"]
=> ["a", "b", "c", "d", "e"]
>> p a[2,3]                       # a[2]から3つの要素
["c", "d", "e"]
=> ["c", "d", "e"]
>> p a[2..3]                      # a[2]からa[3]
["c", "d"]
=> ["c", "d"]
>> p a[2...3]                     # a[2]からa[3]、ただし右端の値は含まない      
["c"]
=> ["c"]

# 文字列の添字演算子に範囲オブジェクトを使用
>> a = "abcdef"
=> "abcdef"
>> p a[1]
"b"
=> "b"
>> p a[1..2]   # "abcder"のa[1]からa[2]
"bc"
=> "bc"
>> p a[1...2]  # "abcdef"のa[1]からa[2]、ただし右端の値は含まない
"b"
=> "b"
```

***

## 3-8-2.`case式`

### `case式`の特徴

* 範囲オブジェクトと関連が強い

* 他のプログラミング言語でいう、`switch文`(swiftなど)

```ruby
case <式>
  when <条件式1> [then]
  when <条件式2> [then]
  else
end
```

***

### `case式`の例

```ruby
>> case 1
>>   when 1 then
?>    p 1
>> end
1
=> 1

>> case "abc"
>>   when "abc"
>>     p 1
>>   when "abc"
>>     p 2       # こちらは実行されない
>> end
1
=> 1

>> a = 10
=> 10
>> b = case a
>>       when 1 then
?>         1     # こちらは実行されない
>>       else
?>         2
>>     end
=> 2
```

***

### 複数の条件式の指定

* カンマで区切って複数の条件を指定可能

* `or条件`となり、どれか１つにマッチする時に実行

  →各条件式で指定された値の`===`演算子が、`case`で指定された値を引数として実行

```ruby
>> case 3
>> when 1,2 then; p 1
>> when 3,4 then; p 2  # 実行される
>> else p 3
>> end
2
=> 2
```

***

### `Range`クラスでの`case式`

```ruby
>> case 7
>> when 1...5 then; p 1
>> when 5..10 then; p 2   # 7を評価すると、trueになるのでこの処理を実行
>> end
2
=> 2
```

***

## 3-8-3.`while式`と`until式`

### `while式`

* 条件を満たす間、処理を繰り返す

* 構文中の`do`は省略可能

```ruby
# while式
while <条件式> do
    <処理内容>
end

# while式の例
>> i = 0
=> 0
>> while (0..4) === i do  # iが0から4の間のとき
?>   p i
>>   i += 1
>> end                    # 0から4までが順に出力される
0
1
2
3
4
=> nil
```

***

### `until式`

* 条件を満たすまでループを繰り返す

```ruby
>> i = 0
=> 0
>> until i==5 do   # i=5がtrueになるまで
?>   p i
>>   i += 1
>> end             # 0から4までが順に出力される
0
1
2
3
4
=> nil
```

***

### 後置

* 最初の`begin節`は、条件に関わらず実行される

* 最初の一回は必ず実行することを強調する際に便利

```ruby
>> i = 0
=> 0
>> begin
?>   p i
>>   i += 1
>> end while(1..4) === i    # 0から4までが順に出力される
0
1
2
3
4
=> nil
```

***

### while修飾子

* while式と同様に、条件を満たす間、対象の式が評価される

```ruby
>> i = 0
=> 0
>> p i += 1 while(0..4) === i
1
2
3
4
5
=> nil
```
