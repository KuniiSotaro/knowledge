3-1.識別子
=========

`識別子`とは・・・
`クラス名`や`変数名`などを構成する、全ての文法の基盤

## 3-1-1.命名規則

### ローカル変数の識別子

* アンダースコア`_`：先頭に使用可能

* 英数字：先頭に使用(通常)

※先頭に数字は使用できない
→数字と区別しにくいため

### ローカル変数の識別子で使っていけない例

```ruby
obj-1          # アンダースコア以外の記号(例として、CSS)

initialized?   # アンダースコア以外の記号(`nil?`などのメソッドならいいが)

1_to_10        # 先頭に数字を指定

nil            # 予約語(他にも`true`など)
```

## 3-1-2.変数と定数のスコープ

### 宣言可能な変数と定数

### ローカル変数

**命名規則**
`先頭`：`英小文字`または、`_`
`構成文字`：`英数字`または、`_`

**スコープ(変数の有効な範囲)**
最初の代入式が使用された位置から、その代入を含む
`ブロック`または`メソッド`定義の終わりまで

※もし`ブロック`の外で参照したローカル変数を`ブロック`で使用すると以下のようになる

```ruby
>> x = 0
=> 0
>> def hoge
>>   (1...5).each do |i|
?>     x += 1             # 変数xは、hogeメソッドの中で定義されていない。未定義の変数に代入しようとしているので、エラー。
>>   end
>>   puts x
>> end
=> :hoge
>> hoge
NoMethodError: undefined method '+' for nil:NilClass
```

***

**初期化していない時の参照時の動作**
`nil`：参照箇所より前に代入文が記述されているが、実行されなかった場合
`例外`：参照箇所より前に代入文が記述されていない場合

例)

```ruby
>> def foo
>>   a_A_05 = 1  # 先頭は「英小文字」、構成文字は「_」と「英数字」
>>   p a_A_05
>> end
=> :foo
>> foo
1
=> 1

>> foo = 1
=> 1
>> def bar
>>   foo     # メソッド呼び出しとみなされる
>> end
=> :bar
>> bar       # barメソッドのローカル変数fooは宣言されていないため
NameError: undefined local variable or method ｀foo｀ for main:Object
>> baz       # ローカル変数bazには対応する代入文がないため
NameError: undefined local variable or method ｀baz｀ for main:Object
```

***

### グローバル変数

**命名規則**
`先頭`：`$`
`構成文字`：`英数字`または、`_`

**スコープ(変数の有効な範囲)**
どこからでも参照可能
→どこからでも更新できてしまうので、特に理由がなければローカル変数を使う

**初期化していない時の参照時の動作**
`nil`

例)

```ruby
>> $foo = 1
=> 1
>> def bar
>>   $foo    # ブロックの外側のグローバル変数$fooを参照
>> end
=> :bar
>> bar       # メソッドbarの$fooはメソッド外側の$fooを参照
=> 1
>> $baz      # 未初期化時のグローバル変数はnil
=> nil
```

***

### クラス変数

**命名規則**
`先頭`：`@@`
`構成文字`：`英数字`または、`_`

**スコープ(変数の有効な範囲)**
そのクラスの全インスタンスから参照

**初期化していない時の参照時の動作**
`例外`発生

例)

```ruby
@@foo_1
```

***

### インスタンス変数

**命名規則**
`先頭`：`@`
`構成文字`：`英数字`または、`_`

**スコープ(変数の有効な範囲)**
そのインスタンス内で参照可能

**初期化していない時の参照時の動作**
`nil`

例)

```ruby
@foo_1
```

```ruby
>> class Foo
>>   @@num = 0
>>   def self.count
>>     @@num += 1
>>   end
>> end
=> :count
>>
?> class Bar < Foo
>> end
=> nil
>>
?> puts Foo.count
1
=> nil
>> puts Bar.count  # クラスBarで参照しても、カウントされる
2
=> nil
```

***

### 定数

**命名規則**
`先頭`：`英大文字`
`構成文字`：`英数字`または、`_`

**スコープ(変数の有効な範囲)**

* 定数が定義されたクラス・モジュール内
* そのクラス・モジュールの内部で定義されたクラス・モジュール内
* そのクラス・モジュールを継承、またはインクルードしているモジュール内

※クラス名やモジュール名で修飾すれば外部からアクセス可能

**初期化していない時の参照時の動作**
`例外`発生

例)

```ruby
RAILS_ENV
```
